!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof module&&module.exports?module.exports=b():a.typeFactory=b()}(this,function(){function a(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function b(b,c,d){var e=c.hasOwnProperty("constructor")?c.constructor:function(){b?b.apply(this,arguments):this.initialize&&this.initialize.apply(this,arguments)};if(b){var f=function(){this.constructor=e};f.prototype=b.prototype,e.prototype=new f,a(e,b)}return d&&a(e,d),c&&a(e.prototype,c),e}return function(a,c){var d=b(null,a,c);return d.extend=function(a,c){return b(this,a,c)},d}});
!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof module&&module.exports?module.exports=b():a.mitty=b()}(this,function(){function a(a,b){if(a instanceof Array)for(var c=0;c<a.length;c++)b(a[c],c);else for(var d in a)a.hasOwnProperty(d)&&b(d,a[d])}function b(a,b){if(Array.prototype.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function c(a,b,c,d){a._mittyOn=a._mittyOn||[],a._mittyOn.push({listener:b,eventName:c,callback:d})}function d(b,c,d,e){if(b._mittyOn&&b._mittyOn.length){var f={},g=[];c&&(f.listener=c),e&&(f.callback=e),d&&(f.eventName=d),a(b._mittyOn,function(b){var c=!0;a(f,function(a,d){b[a]!==d&&(c=!1)}),!c&&g.push(b)}),b._mittyOn=g}}function e(a,b){if(a._mittyOn)for(var c=0;c<a._mittyOn.length;c++)if(a._mittyOn[c].listener===b)return!0;return!1}function f(c,f,g,h){var i=c._mittyListenTo&&c._mittyListenTo.length>0;f&&i?(d(f,c,g,h),e(f,c)||c._mittyListenTo.splice(b(c._mittyListenTo,f),1)):i&&(a(c._mittyListenTo,function(a){d(a,c)}),c._mittyListenTo=[])}var g={on:function(a,b){return c(this,this,a,b),this},listenTo:function(a,d,e){return c(a,this,d,e),this._mittyListenTo=this._mittyListenTo||[],b(this._mittyListenTo,a)<0&&this._mittyListenTo.push(a),this},off:function(a,b){return d(this,null,a,b),this},stopListening:function(a,b,c){return f(this,a,b,c),this},trigger:function(b,c){return this._mittyOn&&a(this._mittyOn,function(a){a.eventName===b&&a.callback.call(a.listener,c)}),this}};return function(b){return a(g,function(a,c){b[a]=c}),b}});
!function(a,b){"function"==typeof define&&define.amd?define(["type-factory","mitty","jquery"],b):"object"==typeof module&&module.exports?module.exports=b(require("type-factory"),require("mitty"),require("jquery")):a.SimpleView=b(a.typeFactory,a.mitty,a.jQuery)}(this,function(a,b,c){var d=0,e=/{{(\S+)}}/g,f=function(a,b){return a.replace(e,function(a,c){var d=0===c.indexOf("this."),e=d?b:window,f=(d?c.slice(5):c).split(".");for(var g in f)if(e=e[f[g]],"undefined"==typeof e)throw new Error("Undefined variable in event string");return e})},g=a({delegatedEvents:!0,constructor:function(a){this.cid="view"+ ++d,a&&a.$el&&(this.$el=a.$el instanceof c?a.$el:c(a.$el).eq(0),delete a.$el),this.beforeInitialize&&this.beforeInitialize.apply(this,arguments),this.initialize&&this.initialize.apply(this,arguments),this.events&&this.$el&&this.setupEvents()},setupEvents:function(){var a=this.ens=this.ens||"."+this.cid,b=this,d={document:window.document,window:window};return c.each("function"==typeof this.events?this.events():this.events,function(e,g){e=f(e,b);var h=0===e.indexOf("one:"),i=(h?e.slice(4):e).split(" "),j=i[0]+a,k=i.slice(1).join(" "),l=b.$el;d[k]?(l=b["$"+k]=b["$"+k]||c(d[k]),k=void 0):b.delegatedEvents||((b.elementsWithBoundEvents=b.elementsWithBoundEvents||[]).push(l=l.find(k)),k=void 0),l[h?"one":"on"](j,k,function(){("function"==typeof g?g:b[g]).apply(b,arguments)})}),this},removeEvents:function(){var a=this.ens;return a&&(this.$el.off(a),this.$document&&this.$document.off(a),this.$window&&this.$window.off(a),this.elementsWithBoundEvents&&(c.each(this.elementsWithBoundEvents,function(b,d){c(d).off(a)}),this.elementsWithBoundEvents=null)),this},remove:function(){return this.trigger("beforeRemove"),this.removeEvents().abortDeferreds().removeViews(),this.$el.remove(),this.trigger("afterRemove"),this.off().stopListening(),this},addDeferred:function(a){return this.deferreds=this.deferreds||[],(!Array.prototype.indexOf||this.deferreds.indexOf(a)<0)&&this.deferreds.push(a),a},abortDeferreds:function(){return this.deferreds&&c.each(this.deferreds,function(a,b){"object"==typeof b&&b.state&&"pending"===b.state()&&(b.abort?b.abort():b.reject())}),delete this.deferreds,this},when:function(a,b,d){var e=this;return c.each(a=c.isArray(a)?a:[a],function(a,b){e.addDeferred(b)}),c.when.apply(window,a).done(c.proxy(b,this)).fail(c.proxy(d,this))},addView:function(a){return this.views=this.views||{},this.views[a.cid]=a,this.listenTo(a,"afterRemove",function(){delete this.views[a.cid]}),a},removeViews:function(){return this.views&&c.each(this.views,function(a,b){b.remove()}),delete this.views,this},$:function(a){return this.$el.find(a)}});return b(g.prototype),g});