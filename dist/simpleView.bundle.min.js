!function(t,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof module&&module.exports?module.exports=n():t.typeFactory=n()}(this,function(){function t(t,n){for(var i in t)t.hasOwnProperty(i)&&n(t[i],i)}function n(n){for(var i=1;i<arguments.length;i++)t(arguments[i],function(t,i){void 0!==t&&(n[i]=t)});return n}function i(t,i,e){var s=(i=i||{}).hasOwnProperty("constructor")?i.constructor:function(){t?t.apply(this,arguments):(this.assignOptions&&(this.writeOptions.apply(this,arguments),this.optionRules&&this.validateOptions(this.options,this.optionRules)),this.initialize&&this.initialize.apply(this,arguments))};if(t){var r=function(){this.constructor=s};r.prototype=t.prototype,s.prototype=new r,n(s,t)}else n(i,o);return e&&n(s,e),n(s.prototype,i),s}var o={writeOptions:function(i){var o="function"==typeof this.defaults?this.defaults():this.defaults,e={};this.optionRules&&t(this.optionRules,function(t,n){e[n]=t.default}),this.options=n({},o,e,i)},validateOptions:function(n,i){var o=[];if(t(i,function(t,i){var e=n[i],s=typeof e;!1===t.required&&"undefined"===s||(t.type&&s!==t.type&&o.push('Option "'+i+'" is '+s+", expected "+t.type+"."),t.rule&&!t.rule(e)&&o.push('Option "'+i+'" breaks defined rule.'),!t.instanceOf||e instanceof t.instanceOf||o.push('Option "'+i+'" is not instance of defined constructor.'))}),o.length)throw new Error(o.join(" "));return this}};return function(t,n){var o=i(null,t,n);return o.extend=function(t,n){return i(this,t,n)},o}});
!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof module&&module.exports?module.exports=b():a.mitty=b()}(this,function(){function a(a,b){if(a instanceof Array)for(var c=0;c<a.length;c++)b(a[c],c);else for(var d in a)a.hasOwnProperty(d)&&b(d,a[d])}function b(a,b){if(Array.prototype.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function c(a,b,c,d){a._mittyOn=a._mittyOn||[],a._mittyOn.push({listener:b,eventName:c,callback:d})}function d(b,c,d,e){if(b._mittyOn&&b._mittyOn.length){var f={},g=[];c&&(f.listener=c),e&&(f.callback=e),d&&(f.eventName=d),a(b._mittyOn,function(b){var c=!0;a(f,function(a,d){b[a]!==d&&(c=!1)}),!c&&g.push(b)}),b._mittyOn=g}}function e(a,b){if(a._mittyOn)for(var c=0;c<a._mittyOn.length;c++)if(a._mittyOn[c].listener===b)return!0;return!1}function f(c,f,g,h){var i=c._mittyListenTo&&c._mittyListenTo.length>0;f&&i?(d(f,c,g,h),e(f,c)||c._mittyListenTo.splice(b(c._mittyListenTo,f),1)):i&&(a(c._mittyListenTo,function(a){d(a,c)}),c._mittyListenTo=[])}var g={on:function(a,b){return c(this,this,a,b),this},listenTo:function(a,d,e){return c(a,this,d,e),this._mittyListenTo=this._mittyListenTo||[],b(this._mittyListenTo,a)<0&&this._mittyListenTo.push(a),this},off:function(a,b){return d(this,null,a,b),this},stopListening:function(a,b,c){return f(this,a,b,c),this},trigger:function(b,c){return this._mittyOn&&a(this._mittyOn,function(a){a.eventName===b&&a.callback.call(a.listener,c)}),this}};return function(b){return a(g,function(a,c){b[a]=c}),b}});
!function(e,i){"function"==typeof define&&define.amd?define(["type-factory","mitty","jquery"],i):"object"==typeof module&&module.exports?module.exports=i(require("type-factory"),require("mitty"),require("jquery")):e.SimpleView=i(e.typeFactory,e.mitty,e.jQuery)}(this,function(e,i,t){var s=0,n=/{{\s*(\S+)\s*}}/g,o=function(e,i){return e.replace(n,function(e,t){var s=i,n=t.slice(5).split(".");for(var o in n)if(void 0===(s=s[n[o]]))throw new Error("Undefined variable in event string");return s})},r={document:window.document,window:window},h=e({delegatedEvents:!0,parseEventVariables:!0,constructor:function(e){this.cid="view"+ ++s,e&&e.$el&&(this.$el=e.$el instanceof t?e.$el:t(e.$el).eq(0),delete e.$el),this.assignOptions&&(this.writeOptions.apply(this,arguments),this.optionRules&&this.validateOptions(this.options,this.optionRules)),this.beforeInitialize&&this.beforeInitialize.apply(this,arguments),this.initialize&&this.initialize.apply(this,arguments),this.events&&this.$el&&this.setupEvents()},setupEvents:function(e){var i=e||this.events,s="function"==typeof i?i.call(this):i,n=this;if(s){var h=this.ens=this.ens||"."+this.cid;t.each(s,function(e,i){n.parseEventVariables&&(e=o(e,n));var s=0===e.indexOf("one:"),d=(s?e.slice(4):e).split(" "),u=d[0]+h,f=d.slice(1).join(" "),l=n.$el;r[f]?(l=n["$"+f]=n["$"+f]||t(r[f]),f=void 0):n.delegatedEvents||((n.elementsWithBoundEvents=n.elementsWithBoundEvents||[]).push(l=l.find(f)),f=void 0),l[s?"one":"on"](u,f,function(){("function"==typeof i?i:n[i]).apply(n,arguments)})})}return this},removeEvents:function(){var e=this.ens;return e&&(this.$el&&this.$el.off(e),this.$document&&this.$document.off(e),this.$window&&this.$window.off(e),this.elementsWithBoundEvents&&(t.each(this.elementsWithBoundEvents,function(i,s){t(s).off(e)}),delete this.elementsWithBoundEvents),delete this.dismissListeners),this},addDismissListener:function(e,i){var s=this;if(!e)throw new Error("Dismiss listener name not speficied");return i=t.extend({$el:this.$el},i),this.$document=this.$document||t(document),this.ens=this.ens||"."+this.cid,this.dismissListeners=this.dismissListeners||{},this.dismissListeners[e]||(this.dismissListeners[e]=function(n){27!==n.keyCode&&(t(n.target).is(i.$el)||t.contains(i.$el.get(0),n.target))||s[e].call(s)},this.$document.on("click"+this.ens+" keyup"+this.ens,this.dismissListeners[e])),this},removeDismissListener:function(e){if(!e)throw new Error("Name of dismiss listener to remove not specified");return this.dismissListeners&&this.dismissListeners[e]&&(this.$document.off("click keyup",this.dismissListeners[e]),delete this.dismissListeners[e]),this},remove:function(){return this.trigger("beforeRemove"),this.removeEvents().removeViews(),this.$el&&this.$el.remove(),this.trigger("afterRemove"),this.off().stopListening(),this},addView:function(e){return this.views=this.views||{},this.views[e.cid]=e,this.listenTo(e,"afterRemove",function(){delete this.views[e.cid]}),e},mapView:function(e,i,s){var n=("string"==typeof e?this.$(e):t(e)).eq(0);return n.length?this.addView(new i(t.extend({$el:n},s))):void 0},mapViews:function(e,i,s){var n=this;return("string"==typeof e?this.$(e):t(e)).map(function(e,o){return n.addView(new i(t.extend({$el:t(o)},s)))}).get()},removeViews:function(){return this.views&&t.each(this.views,function(e,i){i.remove()}),delete this.views,this},$:function(e){return this.$el.find(e)}});return i(h.prototype),h});